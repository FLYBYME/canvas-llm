import { z } from "zod";
import { 
  GET_TITLE_TYPE_REWRITE_ARTIFACT, 
  OPTIONALLY_UPDATE_ARTIFACT_META_SCHEMA, 
  PROGRAMMING_LANGUAGES, 
  ARTIFACT_TOOL_SCHEMA 
} from "./artifact-meta.js";
import { 
  ADD_COMMENTS_TO_CODE_ARTIFACT_PROMPT, 
  ADD_LOGS_TO_CODE_ARTIFACT_PROMPT 
} from "./code-artifact.js";
import { FOLLOWUP_ARTIFACT_PROMPT } from "./followup.js";
import { NEW_ARTIFACT_PROMPT } from "./new-artifact.js";
import { TaskSchema } from "./task.js";
import { TITLE_SYSTEM_PROMPT, TITLE_USER_PROMPT } from "./thread-title.js";

const DEFAULT_CODE_PROMPT_RULES = `- Do NOT include triple backticks when generating code. The code should be in plain text.`;

const APP_CONTEXT = `
<app-context>
The name of the application is "Open Canvas". Open Canvas is a web application where users have a chat window and a canvas to display an artifact.
Artifacts can be any sort of writing content, emails, code, or other creative writing work. Think of artifacts as content, or writing you might find on you might find on a blog, Google doc, or other writing platform.
Users only have a single artifact per conversation, however they have the ability to go back and fourth between artifact edits/revisions.
If a user asks you to generate something completely different from the current artifact, you may do this, as the UI displaying the artifacts will be updated to show whatever they've requested.
Even if the user goes from a 'text' artifact to a 'code' artifact.
</app-context>
`;

export const UPDATE_ENTIRE_ARTIFACT_PROMPT = `You are an AI assistant, and the user has requested you make an update to an artifact you generated in the past.

Here is the current content of the artifact:
<artifact>
{artifactContent}
</artifact>

You also have the following reflections on style guidelines and general memories/facts about the user to use when generating your response.
<reflections>
{reflections}
</reflections>

Please update the artifact based on the user's request.

Follow these rules and guidelines:
<rules-guidelines>
- You should respond with the ENTIRE updated artifact, with no additional text before and after.
- Do not wrap it in any XML tags you see in this prompt.
- You should use proper markdown syntax when appropriate, as the text you generate will be rendered in markdown. UNLESS YOU ARE WRITING CODE.
- When you generate code, a markdown renderer is NOT used so if you respond with code in markdown syntax, or wrap the code in tipple backticks it will break the UI for the user.
- If generating code, it is imperative you never wrap it in triple backticks, or prefix/suffix it with plain text. Ensure you ONLY respond with the code.
${DEFAULT_CODE_PROMPT_RULES}
</rules-guidelines>

{updateMetaPrompt}

Ensure you ONLY reply with the rewritten artifact and NO other content.
`;
